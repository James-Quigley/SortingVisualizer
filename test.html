<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>TwoJS Test</title>
    <script src="two.min.js"></script>
    <style>
        *{
            padding: 0px;
            margin: 0px;
        }
        div{
            margin:0px;
        }
    </style>
</head>

<body>
    <div id="displayArea" style="background:#404040;"></div>
        <a href="#" id="redraw" onclick="redraw()">redraw</a>
    <p id="debug"></p>

    <script>
        
        //grab some data
        for (var data = [], i = 0; i < 200; ++i) data[i] = i;

        // http://stackoverflow.com/questions/962802#962890
        function shuffle(array) {
            var tmp, current, top = array.length;
            if (top)
                while (--top) {
                    current = Math.floor(Math.random() * (top + 1));
                    tmp = array[current];
                    array[current] = array[top];
                    array[top] = tmp;
                }
            return array;
        }

        data = shuffle(data);
        
        //initialize two.js
        var xdef = 0;
        var height = 500;
        var maxWidth = window.innerWidth;
        var paddef = 1;
        var barWidth = ((maxWidth-(paddef * data.length)) / data.length)
        var primary = "#ffffff";
        var elem = document.getElementById("displayArea");
        var params = {
            width: maxWidth,
            height: height
        };
        var two = new Two(params).appendTo(elem);
        var debug = document.getElementById("debug");
        

        

        //iterate through and draw it
        var arrayOfRects = [];
        var max = Math.max(...data);
        console.log(max);
        var debstring = "";
        for (item in data) {
            var x = xdef + (barWidth * item) + (paddef * item);
            //percent of the maxmimum value, scaled to total height of graph
            var barHeight = (data[item] / max) * height;
            var debstring = debstring + "value: " + data[item] + " percent: " + (data[item] / max) + " height: " + ((data[item] / max) * height) + "<br>";
            debug.innerHTML = debstring;
            var rect = two.makeRectangle(x, (height / 2) + (height / 2 - barHeight / 2) + 1, barWidth, barHeight);
            rect.fill = primary;
            rect.noStroke();
            arrayOfRects.push(rect);
            two.update();
        }
        function redraw(){
            two.update();
        }
    </script>
</body>

</html>